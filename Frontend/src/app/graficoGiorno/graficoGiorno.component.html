<script type="text/javascript" src="./vendors/node_modules/chart.js/dist/chart.bundle.js"></script>
<script type="text/javascript" src="./assets/js/linechart.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>

<div class="wrapper">
    <div class="container">
        <!-- <h1>Filter by country</h1> -->
        <div class="row">
            <form class="autoCampo col-7">
                <mat-form-field>
                    <input type="text" placeholder="Choose a country" aria-label="Number" matInput [formControl]="myControl" [matAutocomplete]="auto" id="country" required [(ngModel)]="country">
                    <mat-autocomplete #auto="matAutocomplete">
                        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                            {{option}}
                        </mat-option>
                    </mat-autocomplete>
                </mat-form-field>
            </form>

            <!--FILTRO PER CATEGORIA-->
            <form class="col-4 scegliData" #form="ngForm">
                <div class="form-group row">
                    <label for="continent" class="col-sm-4 col-form-label">Choose date</label>
                    <div class="col-sm-6">
                        <select class="form-control" id="sort" [(ngModel)]="giornoCorrente" required name="sort">
                            <option *ngFor="let option of dataFilter()"> {{option.date}}</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>

        <!-- <div class="sparire"> -->
        <div class="row">

            <div class="col-6">
                <div *ngIf="login.isPress || login.isAdmin">
                    <a id="downloadLink" class="btn-default" download="filename.png" (click)="saveAsImage()" data-toggle="tooltip" data-placement="bottom" title="Save this chart1 as PNG">Save as PNG </a>
                </div>
            </div>
            <div class="col-6">
                <div *ngIf="login.isPress || login.isAdmin">
                    <a id="downloadLink2" download="filename.png" (click)="saveAsImage2()" title="Salvataggio Grafico" data-toggle="tooltip" data-placement="bottom" title="Save this chart as PNG">Save as PNG </a>
                </div>
            </div>

        </div>

        <div class="row">

            <div id="divChart" class="col-5">
                <canvas class="chart-wrapper" #chartwrapper id="chartwrapper">
                    </canvas>
            </div>
            <div class="col-1"></div>
            <div id="divChart2" class="col-5">
                <canvas class="chart-wrapper2" #chartwrapper2 id="chartwrapper2">
                
                    </canvas>
            </div>
        </div>
        <!-- </div> -->

        <!-- <div class="compare">
            <div *ngIf="login.isPress || login.isAdmin">
                <a id="downloadLink" class="btn-default" download="filename.png" (click)="saveAsImage()" data-toggle="tooltip" data-placement="bottom" title="Save this chart1 as PNG">Save as PNG </a>
            </div>

            <div id="divChart">
                <canvas class="chart-wrapper" #chartwrapper id="chartwrapper">
                </canvas>
            </div>

            <div *ngIf="login.isPress || login.isAdmin">
                <a id="downloadLink2" download="filename.png" (click)="saveAsImage2()" title="Salvataggio Grafico" data-toggle="tooltip" data-placement="bottom" title="Save this chart as PNG">Save as PNG </a>
            </div>

            <div id="divChart2">
                <canvas class="chart-wrapper2" #chartwrapper2 id="chartwrapper2">
                </canvas>
            </div>
        </div> -->


        <div class="row">
            <div class="col-10">
                <button id="updOff" class="btn btn-primary" *ngIf="flagGrafico==false" disabled>Update chart</button>
                <button id="updOn" class="btn btn-primary" (click)="updGraph(form)" *ngIf="flagGrafico">Update chart</button>
            </div>




            <!--Questo e' stato fatto in smart working. In altre parole: Smorking-->

            <div *ngIf="login.isPress || login.isAdmin" class="col-2">
                <button id="dlCSV" (click)="downloadCSV()" class="btn btn-primary" data-toggle="tooltip" data-placement="bottom" title="Save all charts data as CSV">
                Save as CSV
            </button>
            </div>

        </div>









        <h1 id="nazione"></h1>
        <div class="pointer" *ngFor="let entry of covidData | country : country">
            <!-- <td>{{entry.cases}}</td>
            <td>{{entry.date | date}}</td> -->
        </div>



    </div>

    <!-- <a id='a' (click)="save()">click me to save</a> -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <script type="text/javascript" src="https://cdn.rawgit.com/eligrey/canvas-toBlob.js/master/canvas-toBlob.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/eligrey/FileSaver.js/master/FileSaver.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <ngx-scrolltop></ngx-scrolltop>
</div>
<!--<button id="download" class="btn btn-primary float-right bg-flat-color-1" (click)="save()" title="Salvataggio Grafico"> </button><-->


<!-- Download Icon -->
<!-- <i class="fa fa-download"></i>

</a> -->


<!-- <script src="./bootstrap-4.4.1/js/bootstrap.min.js" charset="utf-8"></script>
<script src="./bootstrap-4.4.1/jquery/jquery-3.4.1.js" charset="utf-8"></script> -->